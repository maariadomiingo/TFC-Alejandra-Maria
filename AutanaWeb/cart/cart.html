<!DOCTYPE html>
<html lang="es">
  <head>
    <meta charset="UTF-8" />
    <title>Carrito</title>
    <script src="https://js.stripe.com/v3/"></script>
    <style>
      #checkout {
        max-width: 600px;
        margin: 100px auto;
      }
    </style>
  </head>
  <body>
    <h2>Finaliza tu compra</h2>
    <div id="checkout">Cargando...</div>

    <script>
      async function startCheckout() {
        // Petición al backend para crear sesión
        const res = await fetch(
          "http://localhost:4242/create-checkout-session",
          {
            method: "POST",
            headers: {
              "Content-Type": "application/json",
            },
          }
        );

        const { clientSecret } = await res.json();

        const stripe = Stripe(
          "pk_test_51RSxu8Gh171OKFHVkMNBipKFyx92rGe7AUBVdYZBss9qNFE9TDONdTCjVJL1LWGm6mz3S7tosSuuB0MKAq8AWHHZ00qLVGD4l6"
        ); // tu clave pública
        const checkout = await stripe.initEmbeddedCheckout({ clientSecret });

        checkout.mount("#checkout");
      }

      startCheckout();
    </script>
  </body>
</html>
